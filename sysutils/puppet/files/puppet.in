#!/bin/sh
#
# $FreeBSD$
#

# PROVIDE: puppet
# REQUIRE: NETWORK
# KEYWORD: shutdown

#
# Add the following lines to /etc/rc.conf to enable the puppet agent:
#
# puppet_enable="YES"

. /etc/rc.subr

name="puppet"
rcvar=puppet_enable

load_rc_config "$name"

: ${puppet_enable="NO"}

command="%%PREFIX%%/bin/puppet"
command_args="agent"
command_interpreter=%%RUBY%%

pidfile="$($command config print --section agent pidfile)"

run_rc_command "$1"
